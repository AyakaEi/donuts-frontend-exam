(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getWeatherInfo=void 0;const getWeatherInfo=weatherCode=>{if(weatherCode===0){return{label:"快晴",icon:"./static/img/100.svg"}}if(weatherCode===1){return{label:"晴れ",icon:"./static/img/100.svg"}}if(weatherCode===2){return{label:"一部曇",icon:"./static/img/101.svg"}}if(weatherCode===3){return{label:"曇り",icon:"./static/img/200.svg"}}if(weatherCode<=49){return{label:"霧",icon:"./static/img/200.svg"}}if(weatherCode<=59){return{label:"霧雨",icon:"./static/img/202.svg"}}if(weatherCode<=69){return{label:"雨",icon:"./static/img/300.svg"}}if(weatherCode<=79){return{label:"雪",icon:"./static/img/400.svg"}}if(weatherCode<=84){return{label:"俄か雨",icon:"./static/img/302.svg"}}if(weatherCode<=94){return{label:"雪・雹",icon:"./static/img/400.svg"}}if(weatherCode<=99){return{label:"雷雨",icon:"./static/img/300.svg"}}return{label:"ERROR",icon:""}};exports.getWeatherInfo=getWeatherInfo},{}],2:[function(require,module,exports){"use strict";var _getWeatherInfo=require("./hooks/getWeatherInfo");{const getWeather=async()=>{try{const responseWeather=await fetch("https://api.open-meteo.com/v1/forecast?latitude=35.6785&longitude=139.6823&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=Asia%2FTokyo&past_days=1");const responseWeatherJson=await responseWeather.json();const responseRain=await fetch("https://weather.tsukumijima.net/api/forecast/city/130010");const responseRainJson=await responseRain.json();const weatherList=responseWeatherJson.daily;const chanceOfRainList=responseRainJson.forecasts.slice(0,2);const newWeatherList=[];for(let i=1;i<weatherList.time.length;i++){let chanceOfRain=null;if(i===1||i===2){chanceOfRain=chanceOfRainList[i-1].chanceOfRain}const weatherObj={index:i,time:weatherList.time[i],weather_code:weatherList.weather_code[i],temperature_2m_max:weatherList.temperature_2m_max[i],temperature_2m_min:weatherList.temperature_2m_min[i],temperature_2m_max_yesterday:weatherList.temperature_2m_max[i-1],temperature_2m_min_yesterday:weatherList.temperature_2m_min[i-1],chanceOfRain:chanceOfRain};newWeatherList.push(weatherObj)}newWeatherList.map(weather=>{const weatherItem=createWeatherItem(weather);if(weather.index===1||weather.index===2){document.querySelector("#js-todayWeather").appendChild(weatherItem)}else{document.querySelector("#js-weekWeather").appendChild(weatherItem)}})}catch(error){console.log(error)}finally{const loaders=document.querySelectorAll(".js-loader");loaders.forEach(loader=>{loader.style.display="none"})}};const createWeatherItem=weather=>{let weatherItem=document.createElement("div");weatherItem.className="c-weather-item";if(weather.index===2){weatherItem.classList.add("tomorrow")}else if(weather.index>2){weatherItem.classList.add("week")}let heading=document.createElement("h3");heading.className="c-weather-item__heading";const date=new Date(weather.time);const month=date.getMonth()+1;const day=date.getDate();const options={weekday:"short"};const weekday=new Intl.DateTimeFormat("ja-JP",options).format(date);if(weather.index===1){heading.textContent="今日の天気"}else if(weather.index===2){heading.textContent="明日の天気"}else{heading.textContent=`${month}月${day}日 (${weekday})`}let contents=document.createElement("div");contents.className="c-weather-item__contents";let weatherDescription=document.createElement("p");const weatherInfo=(0,_getWeatherInfo.getWeatherInfo)(weather.weather_code);weatherDescription.textContent=weatherInfo.label;let weatherImg=document.createElement("div");weatherImg.className="c-weather-item__img";let img=document.createElement("img");img.src=weatherInfo.icon;img.alt=weatherInfo.label;img.width=80;img.height=60;weatherImg.appendChild(img);let weatherTemp=document.createElement("div");weatherTemp.className="c-weather-item__temp";let tempMax=document.createElement("p");const temMaxCelsius=weather.temperature_2m_max;tempMax.className="c-weather-item__temp-max";tempMax.innerHTML=`<span><span class="c-weather-item__temp-num">${temMaxCelsius}</span>℃</span>`;let tempMaxDiff=document.createElement("span");const yesterdayMaxTemp=weather.temperature_2m_max_yesterday;let diff=getTempDiff(temMaxCelsius,yesterdayMaxTemp);tempMaxDiff.textContent=diff;tempMax.appendChild(tempMaxDiff);let tempMin=document.createElement("p");const temMinCelsius=weather.temperature_2m_min;tempMin.className="c-weather-item__temp-min";tempMin.innerHTML=`<span><span class="c-weather-item__temp-num">${temMinCelsius}</span>℃</span>`;let tempMinDiff=document.createElement("span");const yesterdayMinTemp=weather.temperature_2m_min_yesterday;diff=getTempDiff(temMinCelsius,yesterdayMinTemp);tempMinDiff.textContent=diff;tempMin.appendChild(tempMinDiff);weatherTemp.appendChild(tempMax);weatherTemp.appendChild(tempMin);contents.appendChild(weatherDescription);contents.appendChild(weatherImg);contents.appendChild(weatherTemp);if(weather.index===1||weather.index===2){let precipitationTable=document.createElement("table");precipitationTable.className="c-weather-item__precipitation";let timeRow=document.createElement("tr");timeRow.innerHTML=`\n        <th>時間</th>\n        <td>0-6時</td>\n        <td>6-12時</td>\n        <td>12-18時</td>\n        <td>18-24時</td>\n      `;precipitationTable.appendChild(timeRow);let precipitationRow=document.createElement("tr");const chanceOfRainArray=Object.values(weather.chanceOfRain);let precipitationCol=`<th>降水</th>`;chanceOfRainArray.map(rain=>{precipitationCol+=`<td>${rain}</td>`});precipitationRow.innerHTML=precipitationCol;precipitationTable.appendChild(precipitationRow);contents.appendChild(precipitationTable)}weatherItem.appendChild(heading);weatherItem.appendChild(contents);return weatherItem};const getTempDiff=(todayTemp,yesterdayTemp)=>{let diff=Math.floor(todayTemp-yesterdayTemp);if(diff>0){diff=`+${diff}`}return`[${diff}]`};getWeather()}},{"./hooks/getWeatherInfo":1}]},{},[2]);